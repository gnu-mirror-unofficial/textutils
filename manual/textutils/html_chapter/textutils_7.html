<HTML>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- Created on December, 28  2000 by texi2html 1.64 -->
<!-- 
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Olaf Bachmann <obachman@mathematik.uni-kl.de>
Send bugs and suggestions to <texi2html@mathematik.uni-kl.de>
 
-->
<HEAD>
<TITLE>GNU text utilities: Operating on sorted files</TITLE>

<META NAME="description" CONTENT="GNU text utilities: Operating on sorted files">
<META NAME="keywords" CONTENT="GNU text utilities: Operating on sorted files">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="texi2html 1.64">

</HEAD>

<BODY LANG="EN" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">

<A NAME="SEC22"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_6.html#SEC21"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_7.html#SEC23"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_8.html#SEC33"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_8.html#SEC33"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_11.html#SEC53">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H1> 7. Operating on sorted files </H1>
<!--docid::SEC22::-->
<P>

<A NAME="IDX315"></A>
<A NAME="IDX316"></A>
</P><P>

These commands work with (or produce) sorted files.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="textutils_7.html#SEC23">7.1 <CODE>sort</CODE>: Sort text files</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Sort text files.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="textutils_7.html#SEC24">7.2 <CODE>uniq</CODE>: Uniquify files</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Uniquify files.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="textutils_7.html#SEC25">7.3 <CODE>comm</CODE>: Compare two sorted files line by line</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Compare two sorted files line by line.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="textutils_7.html#SEC27">7.5 <CODE>ptx</CODE>: Produce permuted indexes</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Produce a permuted index of file contents.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="textutils_7.html#SEC26">7.4 <CODE>tsort</CODE>: Topological sort</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Topological sort.</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="sort invocation"></A>
<HR SIZE="6">
<A NAME="SEC23"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_7.html#SEC22"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_7.html#SEC24"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_7.html#SEC22"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_7.html#SEC22"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_8.html#SEC33"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_11.html#SEC53">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 7.1 <CODE>sort</CODE>: Sort text files </H2>
<!--docid::SEC23::-->
<P>

<A NAME="IDX317"></A>
<A NAME="IDX318"></A>
</P><P>

<CODE>sort</CODE> sorts, merges, or compares all the lines from the given
files, or standard input if none are given or for a <VAR>file</VAR> of
<SAMP>`-'</SAMP>.  By default, <CODE>sort</CODE> writes the results to standard
output.  Synopsis:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>sort [<VAR>option</VAR>]<small>...</small> [<VAR>file</VAR>]<small>...</small>
</pre></td></tr></table></P><P>

<CODE>sort</CODE> has three modes of operation: sort (the default), merge,
and check for sortedness.  The following options change the operation
mode:
</P><P>

<DL COMPACT>

<DT><SAMP>`-c'</SAMP>
<DD><A NAME="IDX319"></A>
<A NAME="IDX320"></A>
Check whether the given files are already sorted: if they are not all
sorted, print an error message and exit with a status of 1.
Otherwise, exit successfully.
<P>

<DT><SAMP>`-m'</SAMP>
<DD><A NAME="IDX321"></A>
<A NAME="IDX322"></A>
Merge the given files by sorting them as a group.  Each input file must
always be individually sorted.  It always works to sort instead of
merge; merging is provided because it is faster, in the case where it
works.
<P>

</DL>
<P>

<A NAME="IDX323"></A>
A pair of lines is compared as follows: if any key fields have been
specified, <CODE>sort</CODE> compares each pair of fields, in the order
specified on the command line, according to the associated ordering
options, until a difference is found or no fields are left.
Unless otherwise specified, all comparisons use the character
collating sequence specified by the <CODE>LC_COLLATE</CODE> locale.
</P><P>

If any of the global options <SAMP>`Mbdfinr'</SAMP> are given but no key fields
are specified, <CODE>sort</CODE> compares the entire lines according to the
global options.
</P><P>

Finally, as a last resort when all keys compare equal (or if no
ordering options were specified at all), <CODE>sort</CODE> compares the entire
lines.  The last resort comparison
honors the <SAMP>`-r'</SAMP> global option.  The <SAMP>`-s'</SAMP> (stable) option
disables this last-resort comparison so that lines in which all fields
compare equal are left in their original relative order.  If no fields
or global options are specified, <SAMP>`-s'</SAMP> has no effect.
</P><P>

GNU <CODE>sort</CODE> (as specified for all GNU utilities) has no limits on
input line length or restrictions on bytes allowed within lines.  In
addition, if the final byte of an input file is not a newline, GNU
<CODE>sort</CODE> silently supplies one.  A line's trailing newline is part of
the line for comparison purposes; for example, with no options in an
ASCII locale, a line starting with a tab sorts before an empty line
because tab precedes newline in the ASCII collating sequence.
</P><P>

Upon any error, <CODE>sort</CODE> exits with a status of <SAMP>`2'</SAMP>.
</P><P>

<A NAME="IDX324"></A>
If the environment variable <CODE>TMPDIR</CODE> is set, <CODE>sort</CODE> uses its
value as the directory for temporary files instead of <TT>`/tmp'</TT>.  The
<SAMP>`-T <VAR>tempdir</VAR>'</SAMP> option in turn overrides the environment
variable.
</P><P>

<A NAME="IDX325"></A>
The following options affect the ordering of output lines.  They may be
specified globally or as part of a specific key field.  If no key
fields are specified, global options apply to comparison of entire
lines; otherwise the global options are inherited by key fields that do
not specify any special options of their own.  The <SAMP>`-b'</SAMP>, <SAMP>`-d'</SAMP>,
<SAMP>`-f'</SAMP> and <SAMP>`-i'</SAMP> options classify characters according to
the <CODE>LC_CTYPE</CODE> locale.
</P><P>

<DL COMPACT>

<DT><SAMP>`-b'</SAMP>
<DD><A NAME="IDX326"></A>
<A NAME="IDX327"></A>
Ignore leading blanks when finding sort keys in each line.
<P>

<DT><SAMP>`-d'</SAMP>
<DD><A NAME="IDX328"></A>
<A NAME="IDX329"></A>
<A NAME="IDX330"></A>
Sort in <EM>phone directory</EM> order: ignore all characters except
letters, digits and blanks when sorting.
<P>

<DT><SAMP>`-f'</SAMP>
<DD><A NAME="IDX331"></A>
<A NAME="IDX332"></A>
Fold lowercase characters into the equivalent uppercase characters when
sorting so that, for example, <SAMP>`b'</SAMP> and <SAMP>`B'</SAMP> sort as equal.
<P>

<DT><SAMP>`-g'</SAMP>
<DD><A NAME="IDX333"></A>
<A NAME="IDX334"></A>
Sort numerically, using the standard C function <CODE>strtod</CODE> to convert
a prefix of each line to a double-precision floating point number.
This allows floating point numbers to be specified in scientific notation,
like <CODE>1.0e-34</CODE> and <CODE>10e100</CODE>.
Do not report overflow, underflow, or conversion errors.
Use the following collating sequence:
<P>

<UL>
<LI>
Lines that do not start with numbers (all considered to be equal).
<LI>
NaNs ("Not a Number" values, in IEEE floating point arithmetic)
in a consistent but machine-dependent order.
<LI>
Minus infinity.
<LI>
Finite numbers in ascending numeric order (with <EM>-0</EM> and <EM>+0</EM> equal).
<LI>
Plus infinity.
</UL>
<P>

Use this option only if there is no alternative; it is much slower than
<SAMP>`-n'</SAMP> and it can lose information when converting to floating point.
</P><P>

<DT><SAMP>`-i'</SAMP>
<DD><A NAME="IDX335"></A>
<A NAME="IDX336"></A>
Ignore unprintable characters.
<P>

<DT><SAMP>`-M'</SAMP>
<DD><A NAME="IDX337"></A>
<A NAME="IDX338"></A>
<A NAME="IDX339"></A>
An initial string, consisting of any amount of whitespace, followed
by a month name abbreviation, is folded to UPPER case and
compared in the order <SAMP>`JAN'</SAMP> &#60; <SAMP>`FEB'</SAMP> &#60; <small>...</small> &#60; <SAMP>`DEC'</SAMP>.
Invalid names compare low to valid names.  The <CODE>LC_TIME</CODE> locale
determines the month spellings.
<P>

<DT><SAMP>`-n'</SAMP>
<DD><A NAME="IDX340"></A>
<A NAME="IDX341"></A>
<A NAME="IDX342"></A>
Sort numerically: the number begins each line; specifically, it consists
of optional whitespace, an optional <SAMP>`-'</SAMP> sign, and zero or more
digits possibly separated by thousands separators, optionally followed
by a radix character and zero or more digits.  The <CODE>LC_NUMERIC</CODE>
locale specifies the radix character and thousands separator.
<P>

<CODE>sort -n</CODE> uses what might be considered an unconventional method
to compare strings representing floating point numbers.  Rather than
first converting each string to the C <CODE>double</CODE> type and then
comparing those values, sort aligns the radix characters in the two
strings and compares the strings a character at a time.  One benefit
of using this approach is its speed.  In practice this is much more
efficient than performing the two corresponding string-to-double (or even
string-to-integer) conversions and then comparing doubles.  In addition,
there is no corresponding loss of precision.  Converting each string to
<CODE>double</CODE> before comparison would limit precision to about 16 digits
on most systems.
</P><P>

Neither a leading <SAMP>`+'</SAMP> nor exponential notation is recognized.
To compare such strings numerically, use the <SAMP>`-g'</SAMP> option.
</P><P>

<DT><SAMP>`-r'</SAMP>
<DD><A NAME="IDX343"></A>
<A NAME="IDX344"></A>
Reverse the result of comparison, so that lines with greater key values
appear earlier in the output instead of later.
<P>

</DL>
<P>

Other options are:
</P><P>

<DL COMPACT>

<DT><SAMP>`-o <VAR>output-file</VAR>'</SAMP>
<DD><A NAME="IDX345"></A>
<A NAME="IDX346"></A>
Write output to <VAR>output-file</VAR> instead of standard output.
If <VAR>output-file</VAR> is one of the input files, <CODE>sort</CODE> copies
it to a temporary file before sorting and writing the output to
<VAR>output-file</VAR>.
<P>

<DT><SAMP>`-t <VAR>separator</VAR>'</SAMP>
<DD><A NAME="IDX347"></A>
<A NAME="IDX348"></A>
Use character <VAR>separator</VAR> as the field separator when finding the
sort keys in each line.  By default, fields are separated by the empty
string between a non-whitespace character and a whitespace character.
That is, given the input line <SAMP>` foo bar'</SAMP>, <CODE>sort</CODE> breaks it
into fields <SAMP>` foo'</SAMP> and <SAMP>` bar'</SAMP>.  The field separator is
not considered to be part of either the field preceding or the field
following.
<P>

<DT><SAMP>`-u'</SAMP>
<DD><A NAME="IDX349"></A>
<A NAME="IDX350"></A>
For the default case or the <SAMP>`-m'</SAMP> option, only output the first
of a sequence of lines that compare equal.  For the <SAMP>`-c'</SAMP> option,
check that no pair of consecutive lines compares equal.
<P>

<DT><SAMP>`-k <VAR>pos1</VAR>[,<VAR>pos2</VAR>]'</SAMP>
<DD><A NAME="IDX351"></A>
<A NAME="IDX352"></A>
The recommended, POSIX, option for specifying a sort field.  The field
consists of the part of the line between <VAR>pos1</VAR> and <VAR>pos2</VAR> (or the
end of the line, if <VAR>pos2</VAR> is omitted), <EM>inclusive</EM>.
Fields and character positions are numbered starting with 1.
So to sort on the second field, you'd use <SAMP>`-k 2,2'</SAMP>
See below for more examples.
<P>

<DT><SAMP>`-z'</SAMP>
<DD><A NAME="IDX353"></A>
<A NAME="IDX354"></A>
Treat the input as a set of lines, each terminated by a zero byte (ASCII
NUL (Null) character) instead of an ASCII LF (Line Feed).
This option can be useful in conjunction with <SAMP>`perl -0'</SAMP> or
<SAMP>`find -print0'</SAMP> and <SAMP>`xargs -0'</SAMP> which do the same in order to
reliably handle arbitrary pathnames (even those which contain Line Feed
characters.)
<P>

<DT><SAMP>`+<VAR>pos1</VAR>[-<VAR>pos2</VAR>]'</SAMP>
<DD>The obsolete, traditional option for specifying a sort field.  The field
consists of the line between <VAR>pos1</VAR> and up to but <EM>not including</EM>
<VAR>pos2</VAR> (or the end of the line if <VAR>pos2</VAR> is omitted).  Fields
and character positions are numbered starting with 0.  See below.
<P>

</DL>
<P>

In addition, when GNU <CODE>sort</CODE> is invoked with exactly one argument,
options <SAMP>`--help'</SAMP> and <SAMP>`--version'</SAMP> are recognized.  See section <A HREF="textutils_2.html#SEC2">2. Common options</A>.
</P><P>

Historical (BSD and System V) implementations of <CODE>sort</CODE> have
differed in their interpretation of some options, particularly
<SAMP>`-b'</SAMP>, <SAMP>`-f'</SAMP>, and <SAMP>`-n'</SAMP>.  GNU sort follows the POSIX
behavior, which is usually (but not always!) like the System V behavior.
According to POSIX, <SAMP>`-n'</SAMP> no longer implies <SAMP>`-b'</SAMP>.  For
consistency, <SAMP>`-M'</SAMP> has been changed in the same way.  This may
affect the meaning of character positions in field specifications in
obscure cases.  The only fix is to add an explicit <SAMP>`-b'</SAMP>.
</P><P>

A position in a sort field specified with the <SAMP>`-k'</SAMP> or <SAMP>`+'</SAMP>
option has the form <SAMP>`<VAR>f</VAR>.<VAR>c</VAR>'</SAMP>, where <VAR>f</VAR> is the number
of the field to use and <VAR>c</VAR> is the number of the first character
from the beginning of the field (for <SAMP>`+<VAR>pos</VAR>'</SAMP>) or from the end
of the previous field (for <SAMP>`-<VAR>pos</VAR>'</SAMP>).  If the <SAMP>`.<VAR>c</VAR>'</SAMP>
is omitted, it is taken to be the first character in the field.  If the
<SAMP>`-b'</SAMP> option was specified, the <SAMP>`.<VAR>c</VAR>'</SAMP> part of a field
specification is counted from the first nonblank character of the field
(for <SAMP>`+<VAR>pos</VAR>'</SAMP>) or from the first nonblank character following
the previous field (for <SAMP>`-<VAR>pos</VAR>'</SAMP>).
</P><P>

A sort key option may also have any of the option letters <SAMP>`Mbdfinr'</SAMP>
appended to it, in which case the global ordering options are not used
for that particular field.  The <SAMP>`-b'</SAMP> option may be independently
attached to either or both of the <SAMP>`+<VAR>pos</VAR>'</SAMP> and
<SAMP>`-<VAR>pos</VAR>'</SAMP> parts of a field specification, and if it is inherited
from the global options it will be attached to both.
Keys may span multiple fields.
</P><P>

Here are some examples to illustrate various combinations of options.
In them, the POSIX <SAMP>`-k'</SAMP> option is used to specify sort keys rather
than the obsolete <SAMP>`+<VAR>pos1</VAR>-<VAR>pos2</VAR>'</SAMP> syntax.
</P><P>

<UL>

<LI>
Sort in descending (reverse) numeric order.
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>sort -nr
</pre></td></tr></table></P><P>

Sort alphabetically, omitting the first and second fields.
This uses a single key composed of the characters beginning
at the start of field three and extending to the end of each line.
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>sort -k3
</pre></td></tr></table></P><P>

<LI>
Sort numerically on the second field and resolve ties by sorting
alphabetically on the third and fourth characters of field five.
Use <SAMP>`:'</SAMP> as the field delimiter.
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>sort -t : -k 2,2n -k 5.3,5.4
</pre></td></tr></table></P><P>

Note that if you had written <SAMP>`-k 2'</SAMP> instead of <SAMP>`-k 2,2'</SAMP>
<SAMP>`sort'</SAMP> would have used all characters beginning in the second field
and extending to the end of the line as the primary <EM>numeric</EM>
key.  For the large majority of applications, treating keys spanning
more than one field as numeric will not do what you expect.
</P><P>

Also note that the <SAMP>`n'</SAMP> modifier was applied to the field-end
specifier for the first key.  It would have been equivalent to
specify <SAMP>`-k 2n,2'</SAMP> or <SAMP>`-k 2n,2n'</SAMP>.  All modifiers except
<SAMP>`b'</SAMP> apply to the associated <EM>field</EM>, regardless of whether
the modifier character is attached to the field-start and/or the
field-end part of the key specifier.
</P><P>

<LI>
Sort the password file on the fifth field and ignore any
leading white space.  Sort lines with equal values in field five
on the numeric user ID in field three.
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>sort -t : -k 5b,5 -k 3,3n /etc/passwd
</pre></td></tr></table></P><P>

An alternative is to use the global numeric modifier <SAMP>`-n'</SAMP>.
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>sort -t : -n -k 5b,5 -k 3,3 /etc/passwd
</pre></td></tr></table></P><P>

<LI>
Generate a tags file in case insensitive sorted order.
<TABLE><tr><td>&nbsp;</td><td class=example><pre>find src -type f -print0 | sort -t / -z -f | xargs -0 etags --append
</pre></td></tr></table><P>

The use of <SAMP>`-print0'</SAMP>, <SAMP>`-z'</SAMP>, and <SAMP>`-0'</SAMP> in this case mean
that pathnames that contain Line Feed characters will not get broken up
by the sort operation.
</P><P>

Finally, to ignore both leading and trailing white space, you
could have applied the <SAMP>`b'</SAMP> modifier to the field-end specifier
for the first key,
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>sort -t : -n -k 5b,5b -k 3,3 /etc/passwd
</pre></td></tr></table></P><P>

or by using the global <SAMP>`-b'</SAMP> modifier instead of <SAMP>`-n'</SAMP>
and an explicit <SAMP>`n'</SAMP> with the second key specifier.
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>sort -t : -b -k 5,5 -k 3,3n /etc/passwd
</pre></td></tr></table></P><P>

</UL>
<P>

<A NAME="uniq invocation"></A>
<HR SIZE="6">
<A NAME="SEC24"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_7.html#SEC23"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_7.html#SEC25"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_7.html#SEC25"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_7.html#SEC22"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_8.html#SEC33"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_11.html#SEC53">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 7.2 <CODE>uniq</CODE>: Uniquify files </H2>
<!--docid::SEC24::-->
<P>

<A NAME="IDX355"></A>
<A NAME="IDX356"></A>
</P><P>

<CODE>uniq</CODE> writes the unique lines in the given <TT>`input'</TT>, or
standard input if nothing is given or for an <VAR>input</VAR> name of
<SAMP>`-'</SAMP>.  Synopsis:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>uniq [<VAR>option</VAR>]<small>...</small> [<VAR>input</VAR> [<VAR>output</VAR>]]
</pre></td></tr></table></P><P>

By default, <CODE>uniq</CODE> prints the unique lines in a sorted file, i.e.,
discards all but one of identical successive lines.  Optionally, it can
instead show only lines that appear exactly once, or lines that appear
more than once.
</P><P>

The input must be sorted.  If your input is not sorted, perhaps you want
to use <CODE>sort -u</CODE>.
</P><P>

If no <VAR>output</VAR> file is specified, <CODE>uniq</CODE> writes to standard
output.
</P><P>

The program accepts the following options.  Also see <A HREF="textutils_2.html#SEC2">2. Common options</A>.
</P><P>

<DL COMPACT>

<DT><SAMP>`-<VAR>n</VAR>'</SAMP>
<DD><DT><SAMP>`-f <VAR>n</VAR>'</SAMP>
<DD><DT><SAMP>`--skip-fields=<VAR>n</VAR>'</SAMP>
<DD><A NAME="IDX357"></A>
<A NAME="IDX358"></A>
<A NAME="IDX359"></A>
Skip <VAR>n</VAR> fields on each line before checking for uniqueness.  Fields
are sequences of non-space non-tab characters that are separated from
each other by at least one spaces or tabs.
<P>

<DT><SAMP>`+<VAR>n</VAR>'</SAMP>
<DD><DT><SAMP>`-s <VAR>n</VAR>'</SAMP>
<DD><DT><SAMP>`--skip-chars=<VAR>n</VAR>'</SAMP>
<DD><A NAME="IDX360"></A>
<A NAME="IDX361"></A>
<A NAME="IDX362"></A>
Skip <VAR>n</VAR> characters before checking for uniqueness.  If you use both
the field and character skipping options, fields are skipped over first.
<P>

<DT><SAMP>`-c'</SAMP>
<DD><DT><SAMP>`--count'</SAMP>
<DD><A NAME="IDX363"></A>
<A NAME="IDX364"></A>
Print the number of times each line occurred along with the line.
<P>

<DT><SAMP>`-i'</SAMP>
<DD><DT><SAMP>`--ignore-case'</SAMP>
<DD><A NAME="IDX365"></A>
<A NAME="IDX366"></A>
Ignore differences in case when comparing lines.
<P>

<DT><SAMP>`-d'</SAMP>
<DD><DT><SAMP>`--repeated'</SAMP>
<DD><A NAME="IDX367"></A>
<A NAME="IDX368"></A>
<A NAME="IDX369"></A>
Print only duplicate lines.
<P>

<DT><SAMP>`-D'</SAMP>
<DD><DT><SAMP>`--all-repeated'</SAMP>
<DD><A NAME="IDX370"></A>
<A NAME="IDX371"></A>
<A NAME="IDX372"></A>
Print all duplicate lines and only duplicate lines.
This option is useful mainly in conjunction with other options e.g.,
to ignore case or to compare only selected fields.
This is a GNU extension.
<P>

<DT><SAMP>`-u'</SAMP>
<DD><DT><SAMP>`--unique'</SAMP>
<DD><A NAME="IDX373"></A>
<A NAME="IDX374"></A>
<A NAME="IDX375"></A>
Print only unique lines.
<P>

<DT><SAMP>`-w <VAR>n</VAR>'</SAMP>
<DD><DT><SAMP>`--check-chars=<VAR>n</VAR>'</SAMP>
<DD><A NAME="IDX376"></A>
<A NAME="IDX377"></A>
Compare <VAR>n</VAR> characters on each line (after skipping any specified
fields and characters).  By default the entire rest of the lines are
compared.
<P>

</DL>
<P>

<A NAME="comm invocation"></A>
<HR SIZE="6">
<A NAME="SEC25"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_7.html#SEC24"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_7.html#SEC26"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_7.html#SEC26"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_7.html#SEC22"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_8.html#SEC33"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_11.html#SEC53">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 7.3 <CODE>comm</CODE>: Compare two sorted files line by line </H2>
<!--docid::SEC25::-->
<P>

<A NAME="IDX378"></A>
<A NAME="IDX379"></A>
<A NAME="IDX380"></A>
</P><P>

<CODE>comm</CODE> writes to standard output lines that are common, and lines
that are unique, to two input files; a file name of <SAMP>`-'</SAMP> means
standard input.  Synopsis:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>comm [<VAR>option</VAR>]<small>...</small> <VAR>file1</VAR> <VAR>file2</VAR>
</pre></td></tr></table></P><P>

<A NAME="IDX381"></A>
Before <CODE>comm</CODE> can be used, the input files must be sorted using the
collating sequence specified by the <CODE>LC_COLLATE</CODE> locale, with
trailing newlines significant.  If an input file ends in a non-newline
character, a newline is silently appended.  The <CODE>sort</CODE> command with
no options always outputs a file that is suitable input to <CODE>comm</CODE>.
</P><P>

<A NAME="IDX382"></A>
<A NAME="IDX383"></A>
With no options, <CODE>comm</CODE> produces three column output.  Column one
contains lines unique to <VAR>file1</VAR>, column two contains lines unique
to <VAR>file2</VAR>, and column three contains lines common to both files.
Columns are separated by a single TAB character.
</P><P>

<A NAME="IDX384"></A>
<A NAME="IDX385"></A>
<A NAME="IDX386"></A>
The options <SAMP>`-1'</SAMP>, <SAMP>`-2'</SAMP>, and <SAMP>`-3'</SAMP> suppress printing of
the corresponding columns.  Also see <A HREF="textutils_2.html#SEC2">2. Common options</A>.
</P><P>

Unlike some other comparison utilities, <CODE>comm</CODE> has an exit
status that does not depend on the result of the comparison.
Upon normal completion <CODE>comm</CODE> produces an exit code of zero.
If there is an error it exits with nonzero status.
</P><P>

<A NAME="tsort invocation"></A>
<HR SIZE="6">
<A NAME="SEC26"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_7.html#SEC25"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_7.html#SEC27"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_7.html#SEC27"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_7.html#SEC22"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_8.html#SEC33"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_11.html#SEC53">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 7.4 <CODE>tsort</CODE>: Topological sort </H2>
<!--docid::SEC26::-->
<P>

<A NAME="IDX387"></A>
<A NAME="IDX388"></A>
</P><P>

<CODE>tsort</CODE> performs a topological sort on the given <VAR>file</VAR>, or
standard input if no input file is given or for a <VAR>file</VAR> of
<SAMP>`-'</SAMP>.  Synopsis:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>tsort [<VAR>option</VAR>] [<VAR>file</VAR>]
</pre></td></tr></table></P><P>

<CODE>tsort</CODE> reads its input as pairs of strings, separated by blanks,
indicating a partial ordering.  The output is a total ordering that
corresponds to the given partial ordering.
</P><P>

For example
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>tsort &#60;&#60;EOF
a b c
d
e f
b c d e
EOF
</pre></td></tr></table></P><P>

will produce the output
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>a
b
c
d
e
f
</pre></td></tr></table></P><P>

<CODE>tsort</CODE> will detect cycles in the input and writes the first cycle
encountered to standard error.
</P><P>

Note that for a given partial ordering, generally there is no unique
total ordering.
</P><P>

The only options are <SAMP>`--help'</SAMP> and <SAMP>`--version'</SAMP>.  See section <A HREF="textutils_2.html#SEC2">2. Common options</A>.
</P><P>

<A NAME="ptx invocation"></A>
<HR SIZE="6">
<A NAME="SEC27"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_7.html#SEC26"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_7.html#SEC28"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_7.html#SEC22"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_7.html#SEC22"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_8.html#SEC33"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_11.html#SEC53">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 7.5 <CODE>ptx</CODE>: Produce permuted indexes </H2>
<!--docid::SEC27::-->
<P>

<A NAME="IDX389"></A>
</P><P>

<CODE>ptx</CODE> reads a text file and essentially produces a permuted index, with
each keyword in its context.  The calling sketch is either one of:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>ptx [<VAR>option</VAR> <small>...</small>] [<VAR>file</VAR> <small>...</small>]
ptx -G [<VAR>option</VAR> <small>...</small>] [<VAR>input</VAR> [<VAR>output</VAR>]]
</pre></td></tr></table></P><P>

The <SAMP>`-G'</SAMP> (or its equivalent: <SAMP>`--traditional'</SAMP>) option disables
all GNU extensions and revert to traditional mode, thus introducing some
limitations, and changes several of the program's default option values.
When <SAMP>`-G'</SAMP> is not specified, GNU extensions are always enabled.  GNU
extensions to <CODE>ptx</CODE> are documented wherever appropriate in this
document.  For the full list, see See section <A HREF="textutils_7.html#SEC32">7.5.5 The GNU extensions to <CODE>ptx</CODE></A>.
</P><P>

Individual options are explained in incoming sections.
</P><P>

When GNU extensions are enabled, there may be zero, one or several
<VAR>file</VAR> after the options.  If there is no <VAR>file</VAR>, the program
reads the standard input.  If there is one or several <VAR>file</VAR>, they
give the name of input files which are all read in turn, as if all the
input files were concatenated.  However, there is a full contextual
break between each file and, when automatic referencing is requested,
file names and line numbers refer to individual text input files.  In
all cases, the program produces the permuted index onto the standard
output.
</P><P>

When GNU extensions are <EM>not</EM> enabled, that is, when the program
operates in traditional mode, there may be zero, one or two parameters
besides the options.  If there is no parameters, the program reads the
standard input and produces the permuted index onto the standard output.
If there is only one parameter, it names the text <VAR>input</VAR> to be read
instead of the standard input.  If two parameters are given, they give
respectively the name of the <VAR>input</VAR> file to read and the name of
the <VAR>output</VAR> file to produce.  <EM>Be very careful</EM> to note that,
in this case, the contents of file given by the second parameter is
destroyed.  This behaviour is dictated only by System V <CODE>ptx</CODE>
compatibility, because GNU Standards discourage output parameters not
introduced by an option.
</P><P>

Note that for <EM>any</EM> file named as the value of an option or as an
input text file, a single dash <KBD>-</KBD> may be used, in which case
standard input is assumed.  However, it would not make sense to use this
convention more than once per program invocation.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="textutils_7.html#SEC28">7.5.1 General options</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Options which affect general program behaviour.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="textutils_7.html#SEC29">7.5.2 Charset selection</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Underlying character set considerations.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="textutils_7.html#SEC30">7.5.3 Word selection and input processing</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Input fields, contexts, and keyword selection.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="textutils_7.html#SEC31">7.5.4 Output formatting</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Types of output format, and sizing the fields.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="textutils_7.html#SEC32">7.5.5 The GNU extensions to <CODE>ptx</CODE></A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="General options in ptx"></A>
<HR SIZE="6">
<A NAME="SEC28"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_7.html#SEC27"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_7.html#SEC29"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_7.html#SEC22"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_7.html#SEC27"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_8.html#SEC33"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_11.html#SEC53">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 7.5.1 General options </H3>
<!--docid::SEC28::-->
<P>

<DL COMPACT>

<DT><SAMP>`-C'</SAMP>
<DD><DT><SAMP>`--copyright'</SAMP>
<DD>Prints a short note about the Copyright and copying conditions, then
exit without further processing.
<P>

<DT><SAMP>`-G'</SAMP>
<DD><DT><SAMP>`--traditional'</SAMP>
<DD>As already explained, this option disables all GNU extensions to
<CODE>ptx</CODE> and switch to traditional mode.
<P>

<DT><SAMP>`--help'</SAMP>
<DD>Prints a short help on standard output, then exit without further
processing.
<P>

<DT><SAMP>`--version'</SAMP>
<DD>Prints the program verison on standard output, then exit without further
processing.
<P>

</DL>
<P>

<A NAME="Charset selection in ptx"></A>
<HR SIZE="6">
<A NAME="SEC29"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_7.html#SEC28"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_7.html#SEC30"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_7.html#SEC30"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_7.html#SEC27"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_8.html#SEC33"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_11.html#SEC53">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 7.5.2 Charset selection </H3>
<!--docid::SEC29::-->
<P>

As it is setup now, the program assumes that the input file is coded
using 8-bit ISO 8859-1 code, also known as Latin-1 character set,
<EM>unless</EM> if it is compiled for MS-DOS, in which case it uses the
character set of the IBM-PC.  (GNU <CODE>ptx</CODE> is not known to work on
smaller MS-DOS machines anymore.)  Compared to 7-bit ASCII, the set of
characters which are letters is then different, this fact alters the
behaviour of regular expression matching.  Thus, the default regular
expression for a keyword allows foreign or diacriticized letters.
Keyword sorting, however, is still crude; it obeys the underlying
character set ordering quite blindly.
</P><P>

<DL COMPACT>

<DT><SAMP>`-f'</SAMP>
<DD><DT><SAMP>`--ignore-case'</SAMP>
<DD>Fold lower case letters to upper case for sorting.
<P>

</DL>
<P>

<A NAME="Input processing in ptx"></A>
<HR SIZE="6">
<A NAME="SEC30"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_7.html#SEC29"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_7.html#SEC31"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_7.html#SEC31"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_7.html#SEC27"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_8.html#SEC33"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_11.html#SEC53">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 7.5.3 Word selection and input processing </H3>
<!--docid::SEC30::-->
<P>

<DL COMPACT>

<DT><SAMP>`-b <VAR>file</VAR>'</SAMP>
<DD><DT><SAMP>`--break-file=<VAR>file</VAR>'</SAMP>
<DD><P>

This option provides an alternative (to <SAMP>`-W'</SAMP>) method of describing
which characters make up words.  It introduces the name of a
file which contains a list of characters which can<EM>not</EM> be part of
one word, this file is called the <EM>Break file</EM>.  Any character which
is not part of the Break file is a word constituent.  If both options
<SAMP>`-b'</SAMP> and <SAMP>`-W'</SAMP> are specified, then <SAMP>`-W'</SAMP> has precedence and
<SAMP>`-b'</SAMP> is ignored.
</P><P>

When GNU extensions are enabled, the only way to avoid newline as a
break character is to write all the break characters in the file with no
newline at all, not even at the end of the file.  When GNU extensions
are disabled, spaces, tabs and newlines are always considered as break
characters even if not included in the Break file.
</P><P>

<DT><SAMP>`-i <VAR>file</VAR>'</SAMP>
<DD><DT><SAMP>`--ignore-file=<VAR>file</VAR>'</SAMP>
<DD><P>

The file associated with this option contains a list of words which will
never be taken as keywords in concordance output.  It is called the
<EM>Ignore file</EM>.  The file contains exactly one word in each line; the
end of line separation of words is not subject to the value of the
<SAMP>`-S'</SAMP> option.
</P><P>

There is a default Ignore file used by <CODE>ptx</CODE> when this option is
not specified, usually found in <TT>`/usr/local/lib/eign'</TT> if this has
not been changed at installation time.  If you want to deactivate the
default Ignore file, specify <CODE>/dev/null</CODE> instead.
</P><P>

<DT><SAMP>`-o <VAR>file</VAR>'</SAMP>
<DD><DT><SAMP>`--only-file=<VAR>file</VAR>'</SAMP>
<DD><P>

The file associated with this option contains a list of words which will
be retained in concordance output, any word not mentioned in this file
is ignored.  The file is called the <EM>Only file</EM>.  The file contains
exactly one word in each line; the end of line separation of words is
not subject to the value of the <SAMP>`-S'</SAMP> option.
</P><P>

There is no default for the Only file.  In the case there are both an
Only file and an Ignore file, a word will be subject to be a keyword
only if it is given in the Only file and not given in the Ignore file.
</P><P>

<DT><SAMP>`-r'</SAMP>
<DD><DT><SAMP>`--references'</SAMP>
<DD><P>

On each input line, the leading sequence of non white characters will be
taken to be a reference that has the purpose of identifying this input
line on the produced permuted index.  For more information about reference
production, see See section <A HREF="textutils_7.html#SEC31">7.5.4 Output formatting</A>.
Using this option changes the default value for option <SAMP>`-S'</SAMP>.
</P><P>

Using this option, the program does not try very hard to remove
references from contexts in output, but it succeeds in doing so
<EM>when</EM> the context ends exactly at the newline.  If option
<SAMP>`-r'</SAMP> is used with <SAMP>`-S'</SAMP> default value, or when GNU extensions
are disabled, this condition is always met and references are completely
excluded from the output contexts.
</P><P>

<DT><SAMP>`-S <VAR>regexp</VAR>'</SAMP>
<DD><DT><SAMP>`--sentence-regexp=<VAR>regexp</VAR>'</SAMP>
<DD><P>

This option selects which regular expression will describe the end of a
line or the end of a sentence.  In fact, there is other distinction
between end of lines or end of sentences than the effect of this regular
expression, and input line boundaries have no special significance
outside this option.  By default, when GNU extensions are enabled and if
<SAMP>`-r'</SAMP> option is not used, end of sentences are used.  In this
case, the precise <VAR>regex</VAR> is imported from GNU emacs:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>[.?!][]\"')}]*\\($\\|\t\\|  \\)[ \t\n]*
</pre></td></tr></table></P><P>

Whenever GNU extensions are disabled or if <SAMP>`-r'</SAMP> option is used, end
of lines are used; in this case, the default <VAR>regexp</VAR> is just:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>\n
</pre></td></tr></table></P><P>

Using an empty <VAR>regexp</VAR> is equivalent to completely disabling end of
line or end of sentence recognition.  In this case, the whole file is
considered to be a single big line or sentence.  The user might want to
disallow all truncation flag generation as well, through option <SAMP>`-F
""'</SAMP>.  See section `Syntax of Regular Expressions' in <CITE>The GNU Emacs Manual</CITE>.
</P><P>

When the keywords happen to be near the beginning of the input line or
sentence, this often creates an unused area at the beginning of the
output context line; when the keywords happen to be near the end of the
input line or sentence, this often creates an unused area at the end of
the output context line.  The program tries to fill those unused areas
by wrapping around context in them; the tail of the input line or
sentence is used to fill the unused area on the left of the output line;
the head of the input line or sentence is used to fill the unused area
on the right of the output line.
</P><P>

As a matter of convenience to the user, many usual backslashed escape
sequences, as found in the C language, are recognized and converted to
the corresponding characters by <CODE>ptx</CODE> itself.
</P><P>

<DT><SAMP>`-W <VAR>regexp</VAR>'</SAMP>
<DD><DT><SAMP>`--word-regexp=<VAR>regexp</VAR>'</SAMP>
<DD><P>

This option selects which regular expression will describe each keyword.
By default, if GNU extensions are enabled, a word is a sequence of
letters; the <VAR>regexp</VAR> used is <SAMP>`\w+'</SAMP>.  When GNU extensions are
disabled, a word is by default anything which ends with a space, a tab
or a newline; the <VAR>regexp</VAR> used is <SAMP>`[^ \t\n]+'</SAMP>.
</P><P>

An empty <VAR>regexp</VAR> is equivalent to not using this option, letting the
default dive in.  See section `Syntax of Regular Expressions' in <CITE>The GNU Emacs Manual</CITE>.
</P><P>

As a matter of convenience to the user, many usual backslashed escape
sequences, as found in the C language, are recognized and converted to
the corresponding characters by <CODE>ptx</CODE> itself.
</P><P>

</DL>
<P>

<A NAME="Output formatting in ptx"></A>
<HR SIZE="6">
<A NAME="SEC31"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_7.html#SEC30"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_7.html#SEC32"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_7.html#SEC32"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_7.html#SEC27"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_8.html#SEC33"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_11.html#SEC53">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 7.5.4 Output formatting </H3>
<!--docid::SEC31::-->
<P>

Output format is mainly controlled by <SAMP>`-O'</SAMP> and <SAMP>`-T'</SAMP> options,
described in the table below.  When neither <SAMP>`-O'</SAMP> nor <SAMP>`-T'</SAMP> is
selected, and if GNU extensions are enabled, the program choose an
output format suited for a dumb terminal.  Each keyword occurrence is
output to the center of one line, surrounded by its left and right
contexts.  Each field is properly justified, so the concordance output
could readily be observed.  As a special feature, if automatic
references are selected by option <SAMP>`-A'</SAMP> and are output before the
left context, that is, if option <SAMP>`-R'</SAMP> is <EM>not</EM> selected, then
a colon is added after the reference; this nicely interfaces with GNU
Emacs <CODE>next-error</CODE> processing.  In this default output format, each
white space character, like newline and tab, is merely changed to
exactly one space, with no special attempt to compress consecutive
spaces.  This might change in the future.  Except for those white space
characters, every other character of the underlying set of 256
characters is transmitted verbatim.
</P><P>

Output format is further controlled by the following options.
</P><P>

<DL COMPACT>

<DT><SAMP>`-g <VAR>number</VAR>'</SAMP>
<DD><DT><SAMP>`--gap-size=<VAR>number</VAR>'</SAMP>
<DD><P>

Select the size of the minimum white gap between the fields on the output
line.
</P><P>

<DT><SAMP>`-w <VAR>number</VAR>'</SAMP>
<DD><DT><SAMP>`--width=<VAR>number</VAR>'</SAMP>
<DD><P>

Select the output maximum width of each final line.  If references are
used, they are included or excluded from the output maximum width
depending on the value of option <SAMP>`-R'</SAMP>.  If this option is not
selected, that is, when references are output before the left context,
the output maximum width takes into account the maximum length of all
references.  If this options is selected, that is, when references are
output after the right context, the output maximum width does not take
into account the space taken by references, nor the gap that precedes
them.
</P><P>

<DT><SAMP>`-A'</SAMP>
<DD><DT><SAMP>`--auto-reference'</SAMP>
<DD><P>

Select automatic references.  Each input line will have an automatic
reference made up of the file name and the line ordinal, with a single
colon between them.  However, the file name will be empty when standard
input is being read.  If both <SAMP>`-A'</SAMP> and <SAMP>`-r'</SAMP> are selected, then
the input reference is still read and skipped, but the automatic
reference is used at output time, overriding the input reference.
</P><P>

<DT><SAMP>`-R'</SAMP>
<DD><DT><SAMP>`--right-side-refs'</SAMP>
<DD><P>

In default output format, when option <SAMP>`-R'</SAMP> is not used, any
reference produced by the effect of options <SAMP>`-r'</SAMP> or <SAMP>`-A'</SAMP> are
given to the far right of output lines, after the right context.  In
default output format, when option <SAMP>`-R'</SAMP> is specified, references
are rather given to the beginning of each output line, before the left
context.  For any other output format, option <SAMP>`-R'</SAMP> is almost
ignored, except for the fact that the width of references is <EM>not</EM>
taken into account in total output width given by <SAMP>`-w'</SAMP> whenever
<SAMP>`-R'</SAMP> is selected.
</P><P>

This option is automatically selected whenever GNU extensions are
disabled.
</P><P>

<DT><SAMP>`-F <VAR>string</VAR>'</SAMP>
<DD><DT><SAMP>`--flac-truncation=<VAR>string</VAR>'</SAMP>
<DD><P>

This option will request that any truncation in the output be reported
using the string <VAR>string</VAR>.  Most output fields theoretically extend
towards the beginning or the end of the current line, or current
sentence, as selected with option <SAMP>`-S'</SAMP>.  But there is a maximum
allowed output line width, changeable through option <SAMP>`-w'</SAMP>, which is
further divided into space for various output fields.  When a field has
to be truncated because cannot extend until the beginning or the end of
the current line to fit in the, then a truncation occurs.  By default,
the string used is a single slash, as in <SAMP>`-F /'</SAMP>.
</P><P>

<VAR>string</VAR> may have more than one character, as in <SAMP>`-F ...'</SAMP>.
Also, in the particular case <VAR>string</VAR> is empty (<SAMP>`-F ""'</SAMP>),
truncation flagging is disabled, and no truncation marks are appended in
this case.
</P><P>

As a matter of convenience to the user, many usual backslashed escape
sequences, as found in the C language, are recognized and converted to
the corresponding characters by <CODE>ptx</CODE> itself.
</P><P>

<DT><SAMP>`-M <VAR>string</VAR>'</SAMP>
<DD><DT><SAMP>`--macro-name=<VAR>string</VAR>'</SAMP>
<DD><P>

Select another <VAR>string</VAR> to be used instead of <SAMP>`xx'</SAMP>, while
generating output suitable for <CODE>nroff</CODE>, <CODE>troff</CODE> or TeX.
</P><P>

<DT><SAMP>`-O'</SAMP>
<DD><DT><SAMP>`--format=roff'</SAMP>
<DD><P>

Choose an output format suitable for <CODE>nroff</CODE> or <CODE>troff</CODE>
processing.  Each output line will look like:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>.xx "<VAR>tail</VAR>" "<VAR>before</VAR>" "<VAR>keyword_and_after</VAR>" "<VAR>head</VAR>" "<VAR>ref</VAR>"
</pre></td></tr></table></P><P>

so it will be possible to write an <SAMP>`.xx'</SAMP> roff macro to take care of
the output typesetting.  This is the default output format when GNU
extensions are disabled.  Option <SAMP>`-M'</SAMP> might be used to change
<SAMP>`xx'</SAMP> to another macro name.
</P><P>

In this output format, each non-graphical character, like newline and
tab, is merely changed to exactly one space, with no special attempt to
compress consecutive spaces.  Each quote character: <KBD>"</KBD> is doubled
so it will be correctly processed by <CODE>nroff</CODE> or <CODE>troff</CODE>.
</P><P>

<DT><SAMP>`-T'</SAMP>
<DD><DT><SAMP>`--format=tex'</SAMP>
<DD><P>

Choose an output format suitable for TeX processing.  Each output
line will look like:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>\xx {<VAR>tail</VAR>}{<VAR>before</VAR>}{<VAR>keyword</VAR>}{<VAR>after</VAR>}{<VAR>head</VAR>}{<VAR>ref</VAR>}
</pre></td></tr></table></P><P>

so it will be possible to write a <CODE>\xx</CODE> definition to take care of
the output typesetting.  Note that when references are not being
produced, that is, neither option <SAMP>`-A'</SAMP> nor option <SAMP>`-r'</SAMP> is
selected, the last parameter of each <CODE>\xx</CODE> call is inhibited.
Option <SAMP>`-M'</SAMP> might be used to change <SAMP>`xx'</SAMP> to another macro
name.
</P><P>

In this output format, some special characters, like <KBD>$</KBD>, <KBD>%</KBD>,
<KBD>&#38;</KBD>, <KBD>#</KBD> and <KBD>_</KBD> are automatically protected with a
backslash.  Curly brackets <KBD>{</KBD>, <KBD>}</KBD> are also protected with a
backslash, but also enclosed in a pair of dollar signs to force
mathematical mode.  The backslash itself produces the sequence
<CODE>\backslash{}</CODE>.  Circumflex and tilde diacritics produce the
sequence <CODE>^\{ }</CODE> and <CODE>~\{ }</CODE> respectively.  Other
diacriticized characters of the underlying character set produce an
appropriate TeX sequence as far as possible.  The other non-graphical
characters, like newline and tab, and all others characters which are
not part of ASCII, are merely changed to exactly one space, with no
special attempt to compress consecutive spaces.  Let me know how to
improve this special character processing for TeX.
</P><P>

</DL>
<P>

<A NAME="Compatibility in ptx"></A>
<HR SIZE="6">
<A NAME="SEC32"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_7.html#SEC31"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_8.html#SEC33"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_7.html#SEC22"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_7.html#SEC27"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_8.html#SEC33"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_11.html#SEC53">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 7.5.5 The GNU extensions to <CODE>ptx</CODE> </H3>
<!--docid::SEC32::-->
<P>

This version of <CODE>ptx</CODE> contains a few features which do not exist in
System V <CODE>ptx</CODE>.  These extra features are suppressed by using the
<SAMP>`-G'</SAMP> command line option, unless overridden by other command line
options.  Some GNU extensions cannot be recovered by overriding, so the
simple rule is to avoid <SAMP>`-G'</SAMP> if you care about GNU extensions.
Here are the differences between this program and System V <CODE>ptx</CODE>.
</P><P>

<UL>

<LI>
This program can read many input files at once, it always writes the
resulting concordance on standard output.  On the other end, System V
<CODE>ptx</CODE> reads only one file and produce the result on standard output
or, if a second <VAR>file</VAR> parameter is given on the command, to that
<VAR>file</VAR>.
<P>

Having output parameters not introduced by options is a quite dangerous
practice which GNU avoids as far as possible.  So, for using <CODE>ptx</CODE>
portably between GNU and System V, you should pay attention to always
use it with a single input file, and always expect the result on
standard output.  You might also want to automatically configure in a
<SAMP>`-G'</SAMP> option to <CODE>ptx</CODE> calls in products using <CODE>ptx</CODE>, if
the configurator finds that the installed <CODE>ptx</CODE> accepts <SAMP>`-G'</SAMP>.
</P><P>

<LI>
The only options available in System V <CODE>ptx</CODE> are options <SAMP>`-b'</SAMP>,
<SAMP>`-f'</SAMP>, <SAMP>`-g'</SAMP>, <SAMP>`-i'</SAMP>, <SAMP>`-o'</SAMP>, <SAMP>`-r'</SAMP>, <SAMP>`-t'</SAMP> and
<SAMP>`-w'</SAMP>.  All other options are GNU extensions and are not repeated in
this enumeration.  Moreover, some options have a slightly different
meaning when GNU extensions are enabled, as explained below.
<P>

<LI>
By default, concordance output is not formatted for <CODE>troff</CODE> or
<CODE>nroff</CODE>.  It is rather formatted for a dumb terminal.  <CODE>troff</CODE>
or <CODE>nroff</CODE> output may still be selected through option <SAMP>`-O'</SAMP>.
<P>

<LI>
Unless <SAMP>`-R'</SAMP> option is used, the maximum reference width is
subtracted from the total output line width.  With GNU extensions
disabled, width of references is not taken into account in the output
line width computations.
<P>

<LI>
All 256 characters, even <KBD>NUL</KBD>s, are always read and processed from
input file with no adverse effect, even if GNU extensions are disabled.
However, System V <CODE>ptx</CODE> does not accept 8-bit characters, a few
control characters are rejected, and the tilde <KBD>~</KBD> is condemned.
<P>

<LI>
Input line length is only limited by available memory, even if GNU
extensions are disabled.  However, System V <CODE>ptx</CODE> processes only
the first 200 characters in each line.
<P>

<LI>
The break (non-word) characters default to be every character except all
letters of the underlying character set, diacriticized or not.  When GNU
extensions are disabled, the break characters default to space, tab and
newline only.
<P>

<LI>
The program makes better use of output line width.  If GNU extensions
are disabled, the program rather tries to imitate System V <CODE>ptx</CODE>,
but still, there are some slight disposition glitches this program does
not completely reproduce.
<P>

<LI>
The user can specify both an Ignore file and an Only file.  This is not
allowed with System V <CODE>ptx</CODE>.
<P>

</UL>
<P>

<A NAME="Operating on fields within a line"></A>
<HR SIZE="6">
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_7.html#SEC22"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_8.html#SEC33"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_11.html#SEC53">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<BR>  
<FONT SIZE="-1">
This document was generated
by <I>Paul Visscher</I> on <I>December, 28  2000</I>
using <A HREF="http://www.mathematik.uni-kl.de/~obachman/Texi2html
"><I>texi2html</I></A>

</BODY>
</HTML>
