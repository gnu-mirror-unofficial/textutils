<HTML>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- Created on December, 28  2000 by texi2html 1.64 -->
<!-- 
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Olaf Bachmann <obachman@mathematik.uni-kl.de>
Send bugs and suggestions to <texi2html@mathematik.uni-kl.de>
 
-->
<HEAD>
<TITLE>GNU text utilities: sort invocation</TITLE>

<META NAME="description" CONTENT="GNU text utilities: sort invocation">
<META NAME="keywords" CONTENT="GNU text utilities: sort invocation">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="texi2html 1.64">

</HEAD>

<BODY LANG="EN" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">

<A NAME="SEC23"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_22.html#SEC22"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_24.html#SEC24"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_22.html#SEC22"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_22.html#SEC22"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_33.html#SEC33"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_53.html#SEC53">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<HR SIZE=1>
<H2> 7.1 <CODE>sort</CODE>: Sort text files </H2>
<!--docid::SEC23::-->
<P>

<A NAME="IDX317"></A>
<A NAME="IDX318"></A>
</P><P>

<CODE>sort</CODE> sorts, merges, or compares all the lines from the given
files, or standard input if none are given or for a <VAR>file</VAR> of
<SAMP>`-'</SAMP>.  By default, <CODE>sort</CODE> writes the results to standard
output.  Synopsis:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>sort [<VAR>option</VAR>]<small>...</small> [<VAR>file</VAR>]<small>...</small>
</pre></td></tr></table></P><P>

<CODE>sort</CODE> has three modes of operation: sort (the default), merge,
and check for sortedness.  The following options change the operation
mode:
</P><P>

<DL COMPACT>

<DT><SAMP>`-c'</SAMP>
<DD><A NAME="IDX319"></A>
<A NAME="IDX320"></A>
Check whether the given files are already sorted: if they are not all
sorted, print an error message and exit with a status of 1.
Otherwise, exit successfully.
<P>

<DT><SAMP>`-m'</SAMP>
<DD><A NAME="IDX321"></A>
<A NAME="IDX322"></A>
Merge the given files by sorting them as a group.  Each input file must
always be individually sorted.  It always works to sort instead of
merge; merging is provided because it is faster, in the case where it
works.
<P>

</DL>
<P>

<A NAME="IDX323"></A>
A pair of lines is compared as follows: if any key fields have been
specified, <CODE>sort</CODE> compares each pair of fields, in the order
specified on the command line, according to the associated ordering
options, until a difference is found or no fields are left.
Unless otherwise specified, all comparisons use the character
collating sequence specified by the <CODE>LC_COLLATE</CODE> locale.
</P><P>

If any of the global options <SAMP>`Mbdfinr'</SAMP> are given but no key fields
are specified, <CODE>sort</CODE> compares the entire lines according to the
global options.
</P><P>

Finally, as a last resort when all keys compare equal (or if no
ordering options were specified at all), <CODE>sort</CODE> compares the entire
lines.  The last resort comparison
honors the <SAMP>`-r'</SAMP> global option.  The <SAMP>`-s'</SAMP> (stable) option
disables this last-resort comparison so that lines in which all fields
compare equal are left in their original relative order.  If no fields
or global options are specified, <SAMP>`-s'</SAMP> has no effect.
</P><P>

GNU <CODE>sort</CODE> (as specified for all GNU utilities) has no limits on
input line length or restrictions on bytes allowed within lines.  In
addition, if the final byte of an input file is not a newline, GNU
<CODE>sort</CODE> silently supplies one.  A line's trailing newline is part of
the line for comparison purposes; for example, with no options in an
ASCII locale, a line starting with a tab sorts before an empty line
because tab precedes newline in the ASCII collating sequence.
</P><P>

Upon any error, <CODE>sort</CODE> exits with a status of <SAMP>`2'</SAMP>.
</P><P>

<A NAME="IDX324"></A>
If the environment variable <CODE>TMPDIR</CODE> is set, <CODE>sort</CODE> uses its
value as the directory for temporary files instead of <TT>`/tmp'</TT>.  The
<SAMP>`-T <VAR>tempdir</VAR>'</SAMP> option in turn overrides the environment
variable.
</P><P>

<A NAME="IDX325"></A>
The following options affect the ordering of output lines.  They may be
specified globally or as part of a specific key field.  If no key
fields are specified, global options apply to comparison of entire
lines; otherwise the global options are inherited by key fields that do
not specify any special options of their own.  The <SAMP>`-b'</SAMP>, <SAMP>`-d'</SAMP>,
<SAMP>`-f'</SAMP> and <SAMP>`-i'</SAMP> options classify characters according to
the <CODE>LC_CTYPE</CODE> locale.
</P><P>

<DL COMPACT>

<DT><SAMP>`-b'</SAMP>
<DD><A NAME="IDX326"></A>
<A NAME="IDX327"></A>
Ignore leading blanks when finding sort keys in each line.
<P>

<DT><SAMP>`-d'</SAMP>
<DD><A NAME="IDX328"></A>
<A NAME="IDX329"></A>
<A NAME="IDX330"></A>
Sort in <EM>phone directory</EM> order: ignore all characters except
letters, digits and blanks when sorting.
<P>

<DT><SAMP>`-f'</SAMP>
<DD><A NAME="IDX331"></A>
<A NAME="IDX332"></A>
Fold lowercase characters into the equivalent uppercase characters when
sorting so that, for example, <SAMP>`b'</SAMP> and <SAMP>`B'</SAMP> sort as equal.
<P>

<DT><SAMP>`-g'</SAMP>
<DD><A NAME="IDX333"></A>
<A NAME="IDX334"></A>
Sort numerically, using the standard C function <CODE>strtod</CODE> to convert
a prefix of each line to a double-precision floating point number.
This allows floating point numbers to be specified in scientific notation,
like <CODE>1.0e-34</CODE> and <CODE>10e100</CODE>.
Do not report overflow, underflow, or conversion errors.
Use the following collating sequence:
<P>

<UL>
<LI>
Lines that do not start with numbers (all considered to be equal).
<LI>
NaNs ("Not a Number" values, in IEEE floating point arithmetic)
in a consistent but machine-dependent order.
<LI>
Minus infinity.
<LI>
Finite numbers in ascending numeric order (with <EM>-0</EM> and <EM>+0</EM> equal).
<LI>
Plus infinity.
</UL>
<P>

Use this option only if there is no alternative; it is much slower than
<SAMP>`-n'</SAMP> and it can lose information when converting to floating point.
</P><P>

<DT><SAMP>`-i'</SAMP>
<DD><A NAME="IDX335"></A>
<A NAME="IDX336"></A>
Ignore unprintable characters.
<P>

<DT><SAMP>`-M'</SAMP>
<DD><A NAME="IDX337"></A>
<A NAME="IDX338"></A>
<A NAME="IDX339"></A>
An initial string, consisting of any amount of whitespace, followed
by a month name abbreviation, is folded to UPPER case and
compared in the order <SAMP>`JAN'</SAMP> &#60; <SAMP>`FEB'</SAMP> &#60; <small>...</small> &#60; <SAMP>`DEC'</SAMP>.
Invalid names compare low to valid names.  The <CODE>LC_TIME</CODE> locale
determines the month spellings.
<P>

<DT><SAMP>`-n'</SAMP>
<DD><A NAME="IDX340"></A>
<A NAME="IDX341"></A>
<A NAME="IDX342"></A>
Sort numerically: the number begins each line; specifically, it consists
of optional whitespace, an optional <SAMP>`-'</SAMP> sign, and zero or more
digits possibly separated by thousands separators, optionally followed
by a radix character and zero or more digits.  The <CODE>LC_NUMERIC</CODE>
locale specifies the radix character and thousands separator.
<P>

<CODE>sort -n</CODE> uses what might be considered an unconventional method
to compare strings representing floating point numbers.  Rather than
first converting each string to the C <CODE>double</CODE> type and then
comparing those values, sort aligns the radix characters in the two
strings and compares the strings a character at a time.  One benefit
of using this approach is its speed.  In practice this is much more
efficient than performing the two corresponding string-to-double (or even
string-to-integer) conversions and then comparing doubles.  In addition,
there is no corresponding loss of precision.  Converting each string to
<CODE>double</CODE> before comparison would limit precision to about 16 digits
on most systems.
</P><P>

Neither a leading <SAMP>`+'</SAMP> nor exponential notation is recognized.
To compare such strings numerically, use the <SAMP>`-g'</SAMP> option.
</P><P>

<DT><SAMP>`-r'</SAMP>
<DD><A NAME="IDX343"></A>
<A NAME="IDX344"></A>
Reverse the result of comparison, so that lines with greater key values
appear earlier in the output instead of later.
<P>

</DL>
<P>

Other options are:
</P><P>

<DL COMPACT>

<DT><SAMP>`-o <VAR>output-file</VAR>'</SAMP>
<DD><A NAME="IDX345"></A>
<A NAME="IDX346"></A>
Write output to <VAR>output-file</VAR> instead of standard output.
If <VAR>output-file</VAR> is one of the input files, <CODE>sort</CODE> copies
it to a temporary file before sorting and writing the output to
<VAR>output-file</VAR>.
<P>

<DT><SAMP>`-t <VAR>separator</VAR>'</SAMP>
<DD><A NAME="IDX347"></A>
<A NAME="IDX348"></A>
Use character <VAR>separator</VAR> as the field separator when finding the
sort keys in each line.  By default, fields are separated by the empty
string between a non-whitespace character and a whitespace character.
That is, given the input line <SAMP>` foo bar'</SAMP>, <CODE>sort</CODE> breaks it
into fields <SAMP>` foo'</SAMP> and <SAMP>` bar'</SAMP>.  The field separator is
not considered to be part of either the field preceding or the field
following.
<P>

<DT><SAMP>`-u'</SAMP>
<DD><A NAME="IDX349"></A>
<A NAME="IDX350"></A>
For the default case or the <SAMP>`-m'</SAMP> option, only output the first
of a sequence of lines that compare equal.  For the <SAMP>`-c'</SAMP> option,
check that no pair of consecutive lines compares equal.
<P>

<DT><SAMP>`-k <VAR>pos1</VAR>[,<VAR>pos2</VAR>]'</SAMP>
<DD><A NAME="IDX351"></A>
<A NAME="IDX352"></A>
The recommended, POSIX, option for specifying a sort field.  The field
consists of the part of the line between <VAR>pos1</VAR> and <VAR>pos2</VAR> (or the
end of the line, if <VAR>pos2</VAR> is omitted), <EM>inclusive</EM>.
Fields and character positions are numbered starting with 1.
So to sort on the second field, you'd use <SAMP>`-k 2,2'</SAMP>
See below for more examples.
<P>

<DT><SAMP>`-z'</SAMP>
<DD><A NAME="IDX353"></A>
<A NAME="IDX354"></A>
Treat the input as a set of lines, each terminated by a zero byte (ASCII
NUL (Null) character) instead of an ASCII LF (Line Feed).
This option can be useful in conjunction with <SAMP>`perl -0'</SAMP> or
<SAMP>`find -print0'</SAMP> and <SAMP>`xargs -0'</SAMP> which do the same in order to
reliably handle arbitrary pathnames (even those which contain Line Feed
characters.)
<P>

<DT><SAMP>`+<VAR>pos1</VAR>[-<VAR>pos2</VAR>]'</SAMP>
<DD>The obsolete, traditional option for specifying a sort field.  The field
consists of the line between <VAR>pos1</VAR> and up to but <EM>not including</EM>
<VAR>pos2</VAR> (or the end of the line if <VAR>pos2</VAR> is omitted).  Fields
and character positions are numbered starting with 0.  See below.
<P>

</DL>
<P>

In addition, when GNU <CODE>sort</CODE> is invoked with exactly one argument,
options <SAMP>`--help'</SAMP> and <SAMP>`--version'</SAMP> are recognized.  See section <A HREF="textutils_2.html#SEC2">2. Common options</A>.
</P><P>

Historical (BSD and System V) implementations of <CODE>sort</CODE> have
differed in their interpretation of some options, particularly
<SAMP>`-b'</SAMP>, <SAMP>`-f'</SAMP>, and <SAMP>`-n'</SAMP>.  GNU sort follows the POSIX
behavior, which is usually (but not always!) like the System V behavior.
According to POSIX, <SAMP>`-n'</SAMP> no longer implies <SAMP>`-b'</SAMP>.  For
consistency, <SAMP>`-M'</SAMP> has been changed in the same way.  This may
affect the meaning of character positions in field specifications in
obscure cases.  The only fix is to add an explicit <SAMP>`-b'</SAMP>.
</P><P>

A position in a sort field specified with the <SAMP>`-k'</SAMP> or <SAMP>`+'</SAMP>
option has the form <SAMP>`<VAR>f</VAR>.<VAR>c</VAR>'</SAMP>, where <VAR>f</VAR> is the number
of the field to use and <VAR>c</VAR> is the number of the first character
from the beginning of the field (for <SAMP>`+<VAR>pos</VAR>'</SAMP>) or from the end
of the previous field (for <SAMP>`-<VAR>pos</VAR>'</SAMP>).  If the <SAMP>`.<VAR>c</VAR>'</SAMP>
is omitted, it is taken to be the first character in the field.  If the
<SAMP>`-b'</SAMP> option was specified, the <SAMP>`.<VAR>c</VAR>'</SAMP> part of a field
specification is counted from the first nonblank character of the field
(for <SAMP>`+<VAR>pos</VAR>'</SAMP>) or from the first nonblank character following
the previous field (for <SAMP>`-<VAR>pos</VAR>'</SAMP>).
</P><P>

A sort key option may also have any of the option letters <SAMP>`Mbdfinr'</SAMP>
appended to it, in which case the global ordering options are not used
for that particular field.  The <SAMP>`-b'</SAMP> option may be independently
attached to either or both of the <SAMP>`+<VAR>pos</VAR>'</SAMP> and
<SAMP>`-<VAR>pos</VAR>'</SAMP> parts of a field specification, and if it is inherited
from the global options it will be attached to both.
Keys may span multiple fields.
</P><P>

Here are some examples to illustrate various combinations of options.
In them, the POSIX <SAMP>`-k'</SAMP> option is used to specify sort keys rather
than the obsolete <SAMP>`+<VAR>pos1</VAR>-<VAR>pos2</VAR>'</SAMP> syntax.
</P><P>

<UL>

<LI>
Sort in descending (reverse) numeric order.
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>sort -nr
</pre></td></tr></table></P><P>

Sort alphabetically, omitting the first and second fields.
This uses a single key composed of the characters beginning
at the start of field three and extending to the end of each line.
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>sort -k3
</pre></td></tr></table></P><P>

<LI>
Sort numerically on the second field and resolve ties by sorting
alphabetically on the third and fourth characters of field five.
Use <SAMP>`:'</SAMP> as the field delimiter.
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>sort -t : -k 2,2n -k 5.3,5.4
</pre></td></tr></table></P><P>

Note that if you had written <SAMP>`-k 2'</SAMP> instead of <SAMP>`-k 2,2'</SAMP>
<SAMP>`sort'</SAMP> would have used all characters beginning in the second field
and extending to the end of the line as the primary <EM>numeric</EM>
key.  For the large majority of applications, treating keys spanning
more than one field as numeric will not do what you expect.
</P><P>

Also note that the <SAMP>`n'</SAMP> modifier was applied to the field-end
specifier for the first key.  It would have been equivalent to
specify <SAMP>`-k 2n,2'</SAMP> or <SAMP>`-k 2n,2n'</SAMP>.  All modifiers except
<SAMP>`b'</SAMP> apply to the associated <EM>field</EM>, regardless of whether
the modifier character is attached to the field-start and/or the
field-end part of the key specifier.
</P><P>

<LI>
Sort the password file on the fifth field and ignore any
leading white space.  Sort lines with equal values in field five
on the numeric user ID in field three.
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>sort -t : -k 5b,5 -k 3,3n /etc/passwd
</pre></td></tr></table></P><P>

An alternative is to use the global numeric modifier <SAMP>`-n'</SAMP>.
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>sort -t : -n -k 5b,5 -k 3,3 /etc/passwd
</pre></td></tr></table></P><P>

<LI>
Generate a tags file in case insensitive sorted order.
<TABLE><tr><td>&nbsp;</td><td class=example><pre>find src -type f -print0 | sort -t / -z -f | xargs -0 etags --append
</pre></td></tr></table><P>

The use of <SAMP>`-print0'</SAMP>, <SAMP>`-z'</SAMP>, and <SAMP>`-0'</SAMP> in this case mean
that pathnames that contain Line Feed characters will not get broken up
by the sort operation.
</P><P>

Finally, to ignore both leading and trailing white space, you
could have applied the <SAMP>`b'</SAMP> modifier to the field-end specifier
for the first key,
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>sort -t : -n -k 5b,5b -k 3,3 /etc/passwd
</pre></td></tr></table></P><P>

or by using the global <SAMP>`-b'</SAMP> modifier instead of <SAMP>`-n'</SAMP>
and an explicit <SAMP>`n'</SAMP> with the second key specifier.
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>sort -t : -b -k 5,5 -k 3,3n /etc/passwd
</pre></td></tr></table></P><P>

</UL>
<P>

<A NAME="uniq invocation"></A>
<HR SIZE=1>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_22.html#SEC22"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_24.html#SEC24"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_22.html#SEC22"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_22.html#SEC22"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_33.html#SEC33"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_53.html#SEC53">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="textutils_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<BR>  
<FONT SIZE="-1">
This document was generated
by <I>Paul Visscher</I> on <I>December, 28  2000</I>
using <A HREF="http://www.mathematik.uni-kl.de/~obachman/Texi2html
"><I>texi2html</I></A>

</BODY>
</HTML>
